<!doctype html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      prefix: "tw-",
      content: ["./src/**/*.{html,js,jsx}"],
    };
  </script>
  <script>
    // UTILITIES
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);

    function traer_info() {
      const QUERY = 1;
      const $$insertados = $$("#insertado");
      const $PokeTabla = $("#info_pokemon");

      fetch("/api/bakugan/status")
        .then((res) => res.json())
        .then((data) => {
          console.log(data);
        });

      fetch(`https://pokeapi.co/api/v2/generation/${QUERY}/`)
        .then((res) => res.json())
        .then((data) => {
          console.log(data);
          /* console.log({
        insertados: $$insertados,
      }) */
          // $$insertados.parentNode.removeChild($$insertados);

          const topMoves = data.moves.slice(0, 4);
          $PokeTabla.innerHTML = "";
          topMoves.forEach((move, index) => {
            console.log(move);
            const new_move = document.createElement("div");
            new_move.innerHTML = `<h1>${move.name}</h1>`;
            $PokeTabla.appendChild(new_move);
          });
          // $PokeTabla.innerHTML = (`
          //     <div id="insertado">
          //       <h1>Ejemplo</h1>
          //     </div>
          // `)
        })
        .catch((error) => console.error(error));
    }
  </script>
  <link rel="stylesheet" href="/styles/global.css" />
  <title>Wiki-freak Oficial</title>
</head>

<body class="tw-bg-black">
  <main class="tw-mt-5 tw-mx-5">
    <section>
      <div class="tw-bg-white tw-rounded-lg tw-px-6 tw-py-4">
        <span class="tw-text-4xl">Hola y Bienvenido al Sistema de Wiki-Freak ü§ó</span>
      </div>
    </section>

    <section class="tw-grid tw-grid-cols-3 tw-gap-4 tw-mt-5">
      <div class="tw-bg-white tw-rounded-lg tw-px-6 tw-py-4 tw-text-center">
        <button onclick="traer_info()"
          class="tw-bg-slate-500 tw-px-4 tw-py-3 tw-text-white tw-rounded-lg hover:tw-bg-slate-600 active:tw-bg-slate-800">
          Traer Informaci√≥n
        </button>
        <div id="info_pokemon">
          <div id="insertado">
            <h1>Ejemplo</h1>
          </div>
        </div>
        <div>Aqui va lo de PokeAPI</div>
      </div>
      <div class="tw-bg-white tw-rounded-lg tw-px-6 tw-py-4">
        Aqui va lo de OnePieceAPI
      </div>
      <div class="tw-bg-white tw-rounded-lg tw-px-6 tw-py-4">
        Aqu√≠ va lo de BakuganAPI
      </div>
    </section>
  </main>
</body>

</html>
